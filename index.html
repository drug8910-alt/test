<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>내 소비습관 알아보기</title>

<!-- 캐시 무력화 -->
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
<meta http-equiv="Pragma" content="no-cache" />
<meta http-equiv="Expires" content="0" />

<style>
  :root{
    --pink:#fc6c9d;
    --light:#fff0f5;
    --light-hover:#ffd6e6;
    --pink-dark:#e85b8a;
  }
  /* iOS 텍스트 자동확대 방지 + 기본 폰트/크기 고정 */
  html{ -webkit-text-size-adjust:100%; }
  body{
    font-family: system-ui, -apple-system, Arial, sans-serif;
    margin:0; background:#fafafa; color:#111; text-align:center;
    font-size:16px; line-height:1.4;
  }

  /* 좌우 여백 축소 */
  .wrap{ max-width:640px; margin:0 auto; padding:12px; }
  .card{ background:#fff; border-radius:16px; padding:16px; box-shadow:0 2px 12px rgba(0,0,0,.06); }

  /* 데스크톱에선 약간 넉넉하게 */
  @media (min-width:768px){
    .wrap{ padding:16px; }
    .card{ padding:20px; }
  }

  .progress{ height:8px; background:#eee; border-radius:999px; overflow:hidden; margin:12px auto 18px; max-width:88%; }
  .bar{ height:100%; width:0; background:var(--pink); transition:width .25s; }

  h1{ font-size:22px; margin:0 0 6px; }
  h2{ font-size:18px; margin:0 0 14px; }
  .muted{ color:#666; font-size:14px; }

  /* 버튼: 폰트/높이/폭 통일 */
  .btn{
    border:1px solid var(--pink);
    border-radius:999px;
    padding:14px 16px;            /* 동일 패딩 */
    background:var(--light);
    color:#111;
    cursor:pointer;
    text-align:center;
    width:100%;                   /* 카드 내부 꽉 차게 */
    max-width:480px;
    display:inline-block;
    text-decoration:none;
    box-sizing:border-box;
    transition:background .15s, border-color .15s, transform .02s;
    font-size:16px;               /* 고정 */
    line-height:1.1;
  }
  .btn:hover{ background:var(--light-hover); border-color:var(--pink-dark); }
  .btn:active{ transform:translateY(1px); }

  .btn-primary{
    background:var(--pink);
    border-color:var(--pink);
    color:#fff;
    /* 폰트/패딩도 기본 버튼과 동일 → 크기 통일 */
  }
  .btn-primary:hover{ background:var(--pink-dark); border-color:var(--pink-dark); }

  .btns{ display:flex; flex-direction:column; gap:12px; margin-top:14px; align-items:center; }

  /* 다시하기/링크공유 2개를 한 줄에 */
  .share-row{
    display:flex; gap:10px; justify-content:center; margin-top:12px;
    width:100%; max-width:480px; margin-left:auto; margin-right:auto;
  }
  .share-row .btn{ flex:1; max-width:none; }

  .hidden{ display:none; }

  /* 결과 이미지: 버튼과 동일 폭(가로 여백 더 줄임) */
  .result-img img{ width:100%; max-width:480px; border-radius:12px; display:block; margin:0 auto; }

  .footer{ text-align:center; color:#888; font-size:12px; margin-top:16px; }
</style>
</head>
<body>
  <div class="wrap">
    <!-- Intro -->
    <section id="intro" class="card">
      <img src="제목을-입력해주세요_-001.png?v=10" alt="메인 이미지" style="max-width:100%; border-radius:12px; margin-bottom:14px;">
      <h1>내 소비습관 알아보기</h1>
      <p class="muted">8개의 질문으로 알아보는 나의 돈 쓰는 성격 (약 40초)</p>
      <div class="btns">
        <button id="startBtn" class="btn">시작하기</button>
      </div>
    </section>

    <!-- Quiz -->
    <section id="quiz" class="card hidden">
      <div class="muted" id="qCounter">1 / 8</div>
      <div class="progress"><div class="bar" id="bar"></div></div>
      <h2 id="qText">질문</h2>
      <div class="btns" id="opts"></div>
    </section>

    <!-- Result -->
    <section id="result" class="card hidden">
      <!-- 결과 확인 라벨: 버튼과 동일 크기 + 이미지와 간격 -->
      <div class="btn" aria-hidden="true" style="cursor:default; margin-bottom:12px;">결과 확인</div>

      <div class="result-img" id="rImage"></div>

      <!-- 다시하기 / 링크 공유 -->
      <div class="share-row">
        <button class="btn" id="retry">다시 하기</button>
        <button class="btn" id="shareLink">링크 공유</button>
      </div>

      <!-- 프로모션 버튼들 (텍스트 교체) -->
      <div class="btns" style="margin-top:10px;">
        <a href="https://reviewpicker.kr/" target="_blank" class="btn btn-primary">▶ 60초에 1건, 포스팅 알바 바로가기 ◀</a>
        <a href="https://reviewpicker.kr/notice-detail?idx=13" target="_blank" class="btn btn-primary">▶ 리뷰피커 서포터즈 모집 지원 ◀</a>
      </div>

      <div class="footer">※ 본 테스트는 오락 목적입니다.</div>
    </section>
  </div>

<script>
/* 8문항 */
const quiz = [
  { text: "쇼핑하러 가기 전 나는?", options: [
      { label: "리스트/예산을 먼저 정한다", delta: {J:1} },
      { label: "가서 마음 가는 대로 본다", delta: {P:1} },
    ]},
  { text: "세일 50% vs 새 상품, 무엇에 끌리나?", options: [
      { label: "세일 상품, 합리적인 소비가 좋아", delta: {S:1} },
      { label: "새 상품, 최신이 주는 만족이 있어", delta: {N:1} },
    ]},
  { text: "지출 결정을 할 때 더 중요한 건?", options: [
      { label: "가격 대비 효율/스펙", delta: {T:1} },
      { label: "내가 느낄 행복/감정", delta: {F:1} },
    ]},
  { text: "월급날 루틴은?", options: [
      { label: "고정지출 먼저 정리 후 여가 지출", delta: {J:1} },
      { label: "그날 기분 따라 소소하게 사용", delta: {P:1} },
    ]},
  { text: "여행 경비 계획 스타일은?", options: [
      { label: "숙소/교통/식비까지 구체적으로", delta: {S:1} },
      { label: "큰 틀만 정하고 현지에서 결정", delta: {N:1} },
    ]},
  { text: "충동구매를 하게 되는 이유는?", options: [
      { label: "지금 사면 써먹을 타이밍이라서", delta: {T:1} },
      { label: "지금 당장 갖고 싶어서", delta: {F:1} },
    ]},
  { text: "카드 명세서를 볼 때 나는?", options: [
      { label: "예상 범위인지 체크한다", delta: {J:1} },
      { label: "대충 결제되면 넘어간다", delta: {P:1} },
    ]},
  { text: "평소 더 많이 쓰는 쪽은?", options: [
      { label: "생활 필수품/실용템", delta: {S:1} },
      { label: "특별한 경험/기념품", delta: {N:1} },
    ]},
];

/* 결과 이미지 파일 매핑 */
const v = '10';
const resultMap = {
  "J-S-T": { img: "001.png?v="+v },
  "P-S-T": { img: "002.png?v="+v },
  "J-S-F": { img: "003.png?v="+v },
  "P-S-F": { img: "004.png?v="+v },
  "J-N-T": { img: "005.png?v="+v },
  "P-N-T": { img: "006.png?v="+v },
  "J-N-F": { img: "007.png?v="+v },
  "P-N-F": { img: "008.png?v="+v },
};

let state = { idx: 0, score: {J:0, P:0, S:0, N:0, T:0, F:0} };
const el = {
  intro: document.getElementById('intro'),
  quiz: document.getElementById('quiz'),
  result: document.getElementById('result'),
  start: document.getElementById('startBtn'),
  qCounter: document.getElementById('qCounter'),
  bar: document.getElementById('bar'),
  qText: document.getElementById('qText'),
  opts: document.getElementById('opts'),
  rImage: document.getElementById('rImage'),
  retry: document.getElementById('retry'),
  shareLink: document.getElementById('shareLink'),
};

function showIntro(){
  el.intro.classList.remove('hidden');
  el.quiz.classList.add('hidden');
  el.result.classList.add('hidden');
}
function startQuiz(){
  state = { idx:0, score:{J:0,P:0,S:0,N:0,T:0,F:0} };
  el.intro.classList.add('hidden');
  el.result.classList.add('hidden');
  el.quiz.classList.remove('hidden');
  renderQ();
}
function renderQ(){
  const total = quiz.length;
  const q = quiz[state.idx];
  el.qCounter.textContent = (state.idx+1) + " / " + total;
  el.bar.style.width = ((state.idx)/total)*100 + "%";
  el.qText.textContent = q.text;
  el.opts.innerHTML = "";
  q.options.forEach(opt=>{
    const b = document.createElement('button');
    b.className = 'btn';
    b.textContent = opt.label;
    b.onclick = ()=>{
      for (const k in opt.delta) state.score[k] += opt.delta[k];
      nextQ();
    };
    el.opts.appendChild(b);
  });
}
function nextQ(){
  state.idx++;
  if (state.idx < quiz.length) renderQ();
  else{
    el.bar.style.width = '100%';
    showResult();
  }
}
function pickType(){
  const JorP = state.score.J >= state.score.P ? 'J' : 'P';
  const SorN = state.score.S >= state.score.N ? 'S' : 'N';
  const TorF = state.score.T >= state.score.F ? 'T' : 'F';
  return `${JorP}-${SorN}-${TorF}`;
}
function showResult(){
  const key = pickType();
  const data = resultMap[key] || {};
  el.quiz.classList.add('hidden');
  el.result.classList.remove('hidden');
  el.rImage.innerHTML = "";
  if (data.img){
    const img = new Image();
    img.onload = ()=> {
      img.style.width = "100%";
      img.style.maxWidth = "480px";
      img.style.borderRadius = "12px";
      el.rImage.appendChild(img);
    };
    img.src = data.img;
    img.alt = "결과 이미지";
  }
}

el.start.addEventListener('click', startQuiz);
el.retry.addEventListener('click', showIntro);

/* 링크 공유(지원 시 앱 공유, 미지원 시 복사) */
el.shareLink.addEventListener('click', async ()=>{
  const url = location.href;
  const data = { title: '내 소비습관 알아보기', text: '나의 소비 유형 결과를 확인해보세요!', url };
  if (navigator.share){
    try{ await navigator.share(data); } catch(e){}
  } else if (navigator.clipboard){
    try{
      await navigator.clipboard.writeText(url);
      el.shareLink.textContent = '링크 복사됨';
      setTimeout(()=> el.shareLink.textContent='링크 공유', 1200);
    } catch(e){}
  } else {
    prompt('이 링크를 복사하세요:', url);
  }
});

showIntro();
</script>
</body>
</html>
